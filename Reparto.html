<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión de Pedidos</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #34495e; 
            color: white;
            margin: 0;
            padding: 0;
        }
        header {
            background-color: #2c3e50;
            padding: 10px;
            text-align: center;
        }
        header h1 {
            margin: 0;
            font-size: 24px;
        }
        .form-container {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }
        .form-container form {
            background-color: #566573;
            padding: 20px;
            border-radius: 8px;
            width: 80%;
            max-width: 600px;
        }
        .input-field, .btn {
            width: 100%;
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }
        .input-field {
            background-color: #fff;
            color: #34495e;
        }
        .btn {
            background-color: #27ae60;
            color: white;
            font-size: 16px;
            cursor: pointer;
            border: none;
        }
        .btn:disabled {
            background-color: #e74c3c;
        }
        .repartidores-container {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
        }
        .repartidor-btn {
            background-color: #27ae60;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            width: 100px;
            text-align: center;
        }
        .repartidor-btn.occupied {
            background-color: #e74c3c;
            cursor: not-allowed;
        }
        .repartidor-btn:disabled {
            background-color: #bdc3c7;
        }
        .repartidor-btn:hover {
            background-color: #2ecc71;
        }
    </style>
</head>
<body>

<header>
    <h1>Gestión de Pedidos - Tienda</h1>
</header>

<div class="form-container">
    <form id="pedido-form">
        <div class="input-field">
            <label for="nombre-empresa">Nombre de la Empresa:</label>
            <input type="text" id="nombre-empresa" placeholder="Nombre del Establecimiento" required>
        </div>
        <div class="input-field">
            <label for="direccion-empresa">Dirección de la Empresa:</label>
            <input type="text" id="direccion-empresa" placeholder="Dirección del Establecimiento" required>
        </div>
        <div class="input-field">
            <label for="telefono-empresa">Número de Teléfono:</label>
            <input type="text" id="telefono-empresa" placeholder="Número de Contacto" required>
        </div>
        <div class="input-field">
            <label for="nombre-cliente">Nombre del Cliente:</label>
            <input type="text" id="nombre-cliente" placeholder="Nombre del Cliente" required>
        </div>
        <div class="input-field">
            <label for="direccion-cliente">Dirección del Cliente:</label>
            <input type="text" id="direccion-cliente" placeholder="Dirección de Entrega" required>
        </div>
        <div class="input-field">
            <label for="telefono-cliente">Número de Teléfono del Cliente:</label>
            <input type="text" id="telefono-cliente" placeholder="Número de Contacto del Cliente" required>
        </div>
        <button type="submit" class="btn">Enviar Pedido a Telegram</button>
    </form>
</div>

<div class="repartidores-container">
    <button id="repartidor1" class="repartidor-btn" onclick="seleccionarRepartidor(1)">Repartidor 1</button>
    <button id="repartidor2" class="repartidor-btn" onclick="seleccionarRepartidor(2)">Repartidor 2</button>
    <button id="repartidor3" class="repartidor-btn" onclick="seleccionarRepartidor(3)">Repartidor 3</button>
    <button id="repartidor4" class="repartidor-btn" onclick="seleccionarRepartidor(4)">Repartidor 4</button>
</div>

<script>
    let repartidores = [false, false, false, false]; // Estado de los repartidores (false = libre, true = ocupado)

    const token = '7801474135:AAGXatqMi_F_Nl2cVOKd7eliwtVJMHAWRiU'; // Pon aquí el token de tu bot
    const chat_id = '-1002649667521'; // Pon aquí el chat_id de tu canal

    function seleccionarRepartidor(id) {
        if (repartidores[id - 1]) {
            alert("Este repartidor ya está ocupado.");
            return;
        }

        // Marcar al repartidor como ocupado
        repartidores[id - 1] = true;
        document.getElementById(`repartidor${id}`).classList.add("occupied");
        document.getElementById(`repartidor${id}`).disabled = true;
        alert(`Repartidor ${id} seleccionado. El pedido será enviado a Telegram.`);
        
        // Aquí enviarías el pedido y los datos a Telegram junto con el repartidor
        // Llamada a la API de Telegram para enviar los datos
    }

    document.getElementById("pedido-form").addEventListener("submit", function(event) {
        event.preventDefault();
        const empresa = document.getElementById("nombre-empresa").value;
        const direccionEmpresa = document.getElementById("direccion-empresa").value;
        const telefonoEmpresa = document.getElementById("telefono-empresa").value;
        const cliente = document.getElementById("nombre-cliente").value;
        const direccionCliente = document.getElementById("direccion-cliente").value;
        const telefonoCliente = document.getElementById("telefono-cliente").value;

        const mensaje = `
            **Nuevo Pedido:**
            *Empresa:* ${empresa}
            *Dirección Empresa:* ${direccionEmpresa}
            *Teléfono Empresa:* ${telefonoEmpresa}
            *Cliente:* ${cliente}
            *Dirección Cliente:* ${direccionCliente}
            *Teléfono Cliente:* ${telefonoCliente}
        `;
        
        // Llamada para enviar el mensaje a Telegram
        fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
            method: 'POST',
            body: JSON.stringify({
                chat_id: chat_id,
                text: mensaje,
                parse_mode: 'Markdown'
            }),
            headers: {
                'Content-Type': 'application/json'
            }
        })
        .then(response => response.json())
        .then(data => {
            if (data.ok) {
                alert("Pedido enviado a Telegram!");
            } else {
                alert("Error al enviar el mensaje a Telegram.");
            }
        })
        .catch(error => {
            alert("Error al enviar el mensaje.");
            console.error("Error:", error);
        });
    });
</script>

</body>
</html>
